(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[984],{1469:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{default:function(){return o},getImageProps:function(){return s}});let a=l(8229),n=l(8883),i=l(3063),r=a._(l(1193));function s(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,l]of Object.entries(t))void 0===l&&delete t[e];return{props:t}}let o=i.Image},3494:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var a=l(5155),n=l(2115),i=l(6331);let r=e=>{let{vehicleInfo:t}=e,[l,i]=(0,n.useState)(!1),[r,s]=(0,n.useState)(600),[o,c]=(0,n.useState)(!1),d=()=>{t&&[{id:"vin_number",name:"contact.vin_numner",value:""},{id:"vehicle_year",name:"contact.vehicle_year",value:t.year||""},{id:"vehicle_make",name:"contact.vehicle_make",value:t.make||""},{id:"vehicle_model",name:"contact.vehicle_model",value:t.model||""},{id:"vehicle_trim",name:"contact.vehicle_trim",value:t.trim||""},{id:"vehicle_mileage",name:"contact.vehicle_mileage",value:t.mileage?t.mileage.toString():""},{id:"vehicle_value",name:"contact.vehicle_value",value:t.value?Math.round(t.value).toString():""},{id:"loan_amount",name:"contact.loan_amount",value:t.loanAmount?Math.round(t.loanAmount).toString():""},{id:"vehicle_image_url",name:"contact.vehicle_image_url",value:t.imageUrl||""}].forEach(e=>{let t=document.getElementById(e.id);t&&(t.value=e.value)})},m=()=>{if(!t||!l)return;let e=document.getElementById("ghl-form-iframe");if(!e||!e.contentWindow)return;let a={"contact.vin_numner":"","contact.vehicle_year":t.year||"","contact.vehicle_make":t.make||"","contact.vehicle_model":t.model||"","contact.vehicle_trim":t.trim||"","contact.vehicle_mileage":t.mileage?t.mileage.toString():"","contact.vehicle_value":t.value?Math.round(t.value).toString():"","contact.loan_amount":t.loanAmount?Math.round(t.loanAmount).toString():"","contact.vehicle_image_url":t.imageUrl||""};e.contentWindow.postMessage({type:"ghl_form_data",data:a},"*")};return(0,n.useEffect)(()=>{let e=e=>{e.data&&"ghl_form_height"===e.data.type&&s(e.data.height),e.data&&"ghl_form_submitted"===e.data.type&&c(!0)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,n.useEffect)(()=>{m(),d()},[t]),(0,n.useEffect)(()=>{let e=document.createElement("script");return e.innerHTML="\n      // Listen for form submission in the iframe\n      window.addEventListener('message', function(event) {\n        if (event.data && event.data.type === 'ghl_form_submit') {\n          // Update hidden fields before submission\n          const vehicleYearField = document.getElementById('vehicle_year');\n          const vehicleMakeField = document.getElementById('vehicle_make');\n          const vehicleModelField = document.getElementById('vehicle_model');\n          const vehicleValueField = document.getElementById('vehicle_value');\n          const loanAmountField = document.getElementById('loan_amount');\n          \n          // Find the form in the iframe and update its fields\n          const iframe = document.getElementById('ghl-form-iframe');\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage({\n              type: 'ghl_update_fields',\n              data: {\n                'contact.vehicle_year': vehicleYearField ? vehicleYearField.value : '',\n                'contact.vehicle_make': vehicleMakeField ? vehicleMakeField.value : '',\n                'contact.vehicle_model': vehicleModelField ? vehicleModelField.value : '',\n                'contact.vehicle_value': vehicleValueField ? vehicleValueField.value : '',\n                'contact.loan_amount': loanAmountField ? loanAmountField.value : ''\n              }\n            }, '*');\n          }\n        }\n      });\n    ",document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]),(0,a.jsxs)("div",{className:"ghl-form-container bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Complete Your Application"}),(0,a.jsxs)("div",{style:{display:"none"},children:[(0,a.jsx)("input",{type:"hidden",id:"vin_number",name:"contact.vin_numner",value:""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_year",name:"contact.vehicle_year",value:(null==t?void 0:t.year)||""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_make",name:"contact.vehicle_make",value:(null==t?void 0:t.make)||""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_model",name:"contact.vehicle_model",value:(null==t?void 0:t.model)||""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_trim",name:"contact.vehicle_trim",value:(null==t?void 0:t.trim)||""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_mileage",name:"contact.vehicle_mileage",value:(null==t?void 0:t.mileage)?t.mileage.toString():""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_value",name:"contact.vehicle_value",value:(null==t?void 0:t.value)?Math.round(null==t?void 0:t.value).toString():""}),(0,a.jsx)("input",{type:"hidden",id:"loan_amount",name:"contact.loan_amount",value:(null==t?void 0:t.loanAmount)?Math.round(null==t?void 0:t.loanAmount).toString():""}),(0,a.jsx)("input",{type:"hidden",id:"vehicle_image_url",name:"contact.vehicle_image_url",value:(null==t?void 0:t.imageUrl)||""})]}),o?(0,a.jsxs)("div",{className:"text-center py-8 bg-green-50 rounded-lg",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-green-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-green-800",children:"Application Submitted Successfully!"}),(0,a.jsx)("p",{className:"mt-2 text-green-700",children:"Thank you for your application. Our team will contact you shortly."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ghl-form-wrapper",style:{height:"".concat(r,"px"),overflow:"hidden"},dangerouslySetInnerHTML:{__html:'\n    <iframe \n      id="ghl-form-iframe"\n      src="https://app.gohighlevel.com/v1/forms/YOUR_FORM_ID_HERE/" \n      style="width: 100%; height: 100%; border: none;"\n    ></iframe>\n  '}}),!l&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-900"}),(0,a.jsx)("p",{className:"mt-2",children:"Loading application form..."})]})]})]})},s=e=>{let{vehicleValue:t,initialLoanAmount:l}=e,i=Math.round(.3*t),[r,s]=(0,n.useState)(l?Math.min(l,i):i),[o,c]=(0,n.useState)(30),[d,m]=(0,n.useState)({apr:0,totalInterest:0,totalRepayment:0});return(0,n.useEffect)(()=>{m(function(e){let{loanAmount:t,loanTermDays:l}=e,a=t<=2e3?30:24,n=a/100/365*t*l;return{apr:a,totalInterest:n,totalRepayment:t+n}}({loanAmount:r,loanTermDays:o}))},[r,o]),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Loan Calculator"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("label",{htmlFor:"loan-amount",className:"block text-gray-700 font-medium mb-2",children:["Desired Loan Amount: $",r.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"range",id:"loan-amount",min:"500",max:i,step:"100",value:r,onChange:e=>{s(parseInt(e.target.value))},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"$"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>{let t=e.target.value.replace(/\D/g,""),l=t?parseInt(t):0;l<=i&&s(l)},className:"pl-7 w-24 py-2 border rounded-md"})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Maximum loan amount: $",i.toLocaleString()," (30% of vehicle value)"]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"loan-term",className:"block text-gray-700 font-medium mb-2",children:"Loan Term"}),(0,a.jsxs)("select",{id:"loan-term",value:o,onChange:e=>{c(parseInt(e.target.value))},className:"w-full p-2 border rounded-md",children:[(0,a.jsx)("option",{value:"30",children:"30 Days"}),(0,a.jsx)("option",{value:"60",children:"60 Days"}),(0,a.jsx)("option",{value:"90",children:"90 Days"}),(0,a.jsx)("option",{value:"120",children:"120 Days"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Loan Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Annual Percentage Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[d.apr,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Fixed APR"})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Interest"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:["$",Math.round(d.totalInterest).toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Simple interest"})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Repayment"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",Math.round(d.totalRepayment).toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Principal + Interest"})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Note:"})," This is a simple interest loan. APR is determined by loan amount:"]}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mt-1",children:[(0,a.jsx)("li",{children:"Loans ≤ $2,000: 30% APR"}),(0,a.jsx)("li",{children:"Loans $2,001-$3,000: 24% APR"}),(0,a.jsx)("li",{children:"Loans $3,001+: 24% APR"})]})]})]})]})};function o(){let[e,t]=(0,n.useState)(null);return(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Apply for a Title Loan"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(i.default,{onVehicleInfoChange:e=>{t(e)}})}),e&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(s,{vehicleValue:e.value,initialLoanAmount:e.loanAmount})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(r,{vehicleInfo:e})})]})]})}},4705:(e,t,l)=>{Promise.resolve().then(l.bind(l,3494))},6331:(e,t,l)=>{"use strict";l.d(t,{default:()=>c});var a=l(5155),n=l(2115),i=l(1469),r=l.n(i);let s={apiKey:"FKuNuPaPLi2RDWHLY7NGuFPnJvx53dS0",apiSecret:"5yxomBGfBvmGpKjJ"};async function o(e){let{year:t,make:l,model:a,mileage:n}=e,{apiKey:i}=s,r={imageUrl:null,estimatedValue:0};try{let e="https://marketcheck-prod.apigee.net/v2/search/car/active?api_key=".concat(i,"&year=").concat(t,"&make=").concat(l,"&model=").concat(a);n&&n>0&&(e+="&miles=".concat(n)),e+="&rows=5&photo_links=true&include_relevant_links=false";let s=await fetch(e);if(!s.ok)throw Error("MarketCheck API error: ".concat(s.status));let o=await s.json();if(!o.listings||0===o.listings.length)return r;let c=o.listings.find(e=>e.media&&e.media.photo_links&&e.media.photo_links.length>0),d=null;c&&c.media.photo_links.length>0&&(d=c.media.photo_links[0]);let m=0;if(n&&n>0){let e=o.listings.filter(e=>{let t=e.miles||0;return t>=.8*n&&t<=1.2*n&&e.price>0});if(e.length>0)m=e.reduce((e,t)=>e+t.price,0)/e.length;else{let e=o.listings.filter(e=>e.price&&e.price>0).map(e=>e.price);e.length>0&&(m=e.reduce((e,t)=>e+t,0)/e.length)}}else{let e=o.listings.filter(e=>e.price&&e.price>0).map(e=>e.price);e.length>0&&(m=e.reduce((e,t)=>e+t,0)/e.length)}return{imageUrl:d,estimatedValue:Math.round(m)}}catch(e){return console.error("Error fetching MarketCheck data:",e),r}}let c=e=>{let{onVehicleInfoChange:t}=e,[l,i]=(0,n.useState)(""),[s,c]=(0,n.useState)(""),[d,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[v,g]=(0,n.useState)(null),[x,p]=(0,n.useState)("vin"),f=async()=>{if(!l||17!==l.length)return void h("Please enter a valid 17-character VIN");m(!0),h(null);try{let e=await fetch("https://vpic.nhtsa.dot.gov/api/vehicles/decodevin/".concat(l,"?format=json")),a=await e.json();if(!a.Results||0===a.Results.length)throw Error("Failed to decode VIN");let n=a.Results,i=n.find(e=>"Model Year"===e.Variable),r=n.find(e=>"Make"===e.Variable),c=n.find(e=>"Model"===e.Variable),d=n.find(e=>"Trim"===e.Variable),m=(null==i?void 0:i.Value)||"",u=(null==r?void 0:r.Value)||"",h=(null==c?void 0:c.Value)||"",v=(null==d?void 0:d.Value)||"";if(!m||!u||!h)throw Error("Could not extract complete vehicle information");let x=s?parseInt(s):0,p=await o({year:m,make:u,model:h,trim:v,mileage:x}),f=p.imageUrl,y=p.estimatedValue;0===y&&(y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=new Date().getFullYear()-parseInt(e),a=Math.max(3e4-2e3*l,5e3);return t>0&&(a*=1-Math.min(t/5e4*.1,.8)),Math.max(Math.round(a),1e3)}(m,x));let j=.3*y,b={year:m,make:u,model:h,trim:v,mileage:x,value:y,loanAmount:j,imageUrl:f};g(b),t&&t(b)}catch(e){console.error("Error decoding VIN:",e),h("Failed to decode VIN. Please check the VIN and try again."),g(null),t&&t(null)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,a.jsx)("button",{className:"py-2 px-4 font-medium ".concat("vin"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>p("vin"),children:"VIN Lookup"}),(0,a.jsx)("button",{className:"py-2 px-4 font-medium ".concat("details"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>p("details"),children:"Vehicle Details"})]})}),"vin"===x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"vin",className:"block text-gray-700 font-medium mb-2",children:"Vehicle Identification Number (VIN)"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,a.jsx)("input",{type:"text",id:"vin",className:"form-control flex-grow",placeholder:"Enter 17-character VIN",value:l,onChange:e=>{i(e.target.value)},maxLength:17}),(0,a.jsx)("input",{type:"text",id:"mileage",className:"form-control md:w-1/3",placeholder:"Mileage (optional)",value:s,onChange:e=>{c(e.target.value.replace(/\D/g,""))}}),(0,a.jsx)("button",{className:"bg-primary-800 hover:bg-primary-900 text-white font-bold py-2 px-4 rounded-md",onClick:f,disabled:d,children:d?"Decoding...":"Decode VIN"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Found on your vehicle registration, insurance card, or driver's side door jamb"})]}),"details"===x&&(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:"Manual vehicle details entry coming soon"})}),u&&(0,a.jsx)("div",{className:"mt-4 text-red-600",children:u}),v&&(0,a.jsxs)("div",{className:"mt-6 p-4 border-l-4 border-yellow-400 bg-gray-50",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-3",children:"Vehicle Information:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[v.year," ",v.make," ",v.model]}),v.trim&&(0,a.jsxs)("p",{className:"text-gray-700",children:["Trim: ",v.trim]}),v.mileage>0&&(0,a.jsxs)("p",{className:"text-gray-700",children:["Mileage: ",v.mileage.toLocaleString()," miles"]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("p",{className:"text-gray-700",children:["Estimated Value: ",(0,a.jsxs)("span",{className:"font-semibold",children:["$",Math.round(v.value).toLocaleString()]})]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["Max Loan Amount: ",(0,a.jsxs)("span",{className:"font-semibold text-green-600",children:["$",Math.round(v.loanAmount).toLocaleString()]})]})]}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"This information will be automatically added to your application."})]}),v.imageUrl?(0,a.jsx)("div",{className:"relative h-48 md:h-auto",children:(0,a.jsx)(r(),{src:v.imageUrl,alt:"".concat(v.year," ").concat(v.make," ").concat(v.model),fill:!0,className:"object-contain rounded-md"})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-48 md:h-auto bg-gray-100 rounded-md",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No image available"})})]})]})]})}},6654:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=l(2115);function n(e,t){let l=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=l.current;e&&(l.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(l.current=i(e,a)),t&&(n.current=i(t,a))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let l=e(t);return"function"==typeof l?l:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{var t=t=>e(e.s=t);e.O(0,[63,441,684,358],()=>t(4705)),_N_E=e.O()}]);